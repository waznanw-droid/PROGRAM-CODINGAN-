#include <SoftwareSerial.h>
#include <DFRobotDFPlayerMini.h>

/*
ATmega328P Standalone Pin Mapping
--------------------------------
D2 (PD2) -> DFPlayer TX
D3 (PD3) -> DFPlayer RX (via 1k resistor)
D4 (PD4) -> Push Button
*/

#define DF_RX 2
#define DF_TX 3
#define BUTTON 4

SoftwareSerial mp3Serial(DF_RX, DF_TX);
DFRobotDFPlayerMini mp3;

bool lastButtonState = HIGH;

void setup() {
  pinMode(BUTTON, INPUT_PULLUP);

  mp3Serial.begin(9600);
  delay(1000); // tunggu DFPlayer siap

  if (!mp3.begin(mp3Serial)) {
    while (1); // STOP jika gagal
  }

  mp3.volume(15); // 0–30
}

void loop() {
  bool buttonState = digitalRead(BUTTON);

  // tombol ditekan (HIGH -> LOW)
  if (buttonState == LOW && lastButtonState == HIGH) {
    mp3.play(1);       // 0001.mp3
    delay(300);        // debounce
  }

  lastButtonState = buttonState;
}
